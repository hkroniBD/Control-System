# ğŸ“˜ Lecture: DC Motor â€“ From Modeling to Controller Design and Deployment

---

## 1. ğŸ” Introduction

* DC motors are widely used in **robotics, industrial drives, and automation** because they are:
  âœ… Easy to control
  âœ… Provide fast and accurate response

* Controller design process involves:

  1. **System Modeling** (mathematical equations)
  2. **System Analysis** (stability, dynamics)
  3. **Controller Design** (PID / state feedback / modern)
  4. **Simulation & Validation** (MATLAB testing)
  5. **Deployment** (embedded implementation on real hardware)

---

## 2. ğŸ§© System Components and Control Loop

Before we write equations, letâ€™s understand **who does what** in the closed-loop DC motor control system.

### ğŸ¯ Control Goal

* Make the **motor speed (angular velocity, Ï‰)** follow a **reference command** (e.g., a desired RPM).
* Ensure the speed is achieved with **fast response, minimum overshoot, and small steady-state error**.

---

### âš¡ System Roles

1. **Reference (Setpoint, Ï‰\_ref):**

   * The target motor speed (e.g., 100 rad/s).

2. **Controller (Brain):**

   * Compares the error = (Ï‰\_ref â€“ measured Ï‰).
   * Decides the necessary **armature voltage Va** to reduce error.
   * Example: PID controller.

3. **Actuator (Muscle):**

   * Power electronics (e.g., H-bridge, PWM inverter) that apply the control voltage $V_a$ to the motor.

4. **Plant (Body â€“ DC Motor):**

   * Converts the applied voltage into torque and rotational motion.
   * Dynamics governed by electrical + mechanical equations.

5. **Sensor (Eye):**

   * Measures actual speed (Ï‰) using a **tachometer or encoder**.
   * Provides feedback to the controller.

---

### ğŸ”„ Control Loop Block Diagram

```
   Reference Speed (Ï‰ref)
              â†“
        +-------------+
        | Controller  | â†’ computes Va
        +-------------+
              â†“
        +-------------+
        |  Actuator   | â†’ applies voltage
        +-------------+
              â†“
        +-------------+
        | DC Motor    | â†’ Ï‰ (speed)
        +-------------+
              â†“
   Speed Sensor (encoder) â†’ feedback
```

ğŸ‘‰ In this loop:

* *Controller = Brain* ğŸ§ 
* *Actuator = Muscle* ğŸ’ª
* *Sensor = Eye* ğŸ‘ï¸
* *Motor = Body* âš™ï¸

---

## 3. âš™ï¸ System Modeling

### ğŸ“ Governing Equations

**Electrical equation (KVL):**

$$
V_a(t) = L_a \frac{di_a}{dt} + R_a i_a + K_b \omega(t)
$$

**Mechanical equation (Newtonâ€™s Law):**

$$
J \frac{d\omega}{dt} + B\omega(t) = K_t i_a(t)
$$

---

### ğŸ“‘ Parameters and Their Meaning

* **$V_a$** â†’ Armature voltage (input supply to motor)
* **$i_a$** â†’ Armature current (A)
* **$R_a$** â†’ Armature resistance of DC motor (Î©)
* **$L_a$** â†’ Armature inductance of DC motor (H)
* **$K_b$** â†’ Back-EMF constant (VÂ·s/rad)
* **$\omega$** â†’ Angular velocity (rad/s)
* **$J$** â†’ Rotor inertia of DC motor (kgÂ·mÂ²)
* **$B$** â†’ Viscous friction coefficient of motor (NÂ·mÂ·s)
* **$T_m = K_t i_a$** â†’ Electromagnetic torque (NÂ·m)
* **$K_t$** â†’ Torque constant (NÂ·m/A)

ğŸ‘‰ **Interaction:** Apply voltage â†’ current flows â†’ torque generated â†’ rotor accelerates â†’ back EMF opposes input.

---

### ğŸ”„ Transfer Function

$$
\frac{\Omega(s)}{V_a(s)} = \frac{K_t}{(L_a s + R_a)(J s + B) + K_b K_t}
$$

---

### ğŸ“Š State-Space Representation

Let $x_1 = i_a, x_2 = \omega$:

$$
\dot{x} =
\begin{bmatrix}
-\frac{R_a}{L_a} & -\frac{K_b}{L_a} \\
\frac{K_t}{J} & -\frac{B}{J}
\end{bmatrix} x +
\begin{bmatrix}
\frac{1}{L_a} \\ 0
\end{bmatrix} V_a
$$

$$
y = [0 \;\; 1] x
$$

---

## 4. ğŸ“ System Analysis

* Motor acts as a **second-order system**.
* Stable if poles of denominator lie in the **left-half plane**.

ğŸ“Œ Example Parameters:

* $R_a = 1 \,Î©, L_a = 0.5 \,H$
* $K_t = K_b = 0.01$
* $J = 0.01 \,kgÂ·mÂ², B = 0.1$

---

## 5. ğŸ›ï¸ Controller Design

### ğŸ¯ Control Goals

* Motor speed follows reference input.
* Desired performance: **fast rise time, minimal overshoot, zero steady-state error**.

### ğŸ› ï¸ Methods

* **PID Control** â†’ most common in industry.
* **State Feedback** â†’ pole placement.
* **LQR** â†’ optimal performance.

---

### ğŸ§‘â€ğŸ’» MATLAB Example: PID Controller

```matlab
% âš™ï¸ Motor Parameters
Ra = 1; La = 0.5; Kt = 0.01; Kb = 0.01; 
J = 0.01; B = 0.1;

% ğŸ“ Transfer Function
num = [Kt];
den = [(La*J) (Ra*J + La*B) (Ra*B + Kt*Kb)];
sys = tf(num, den);

% ğŸ“Š Open-loop Response
figure; step(sys);
title('Open-loop Step Response');

% ğŸ›ï¸ PID Controller
Kp = 100; Ki = 200; Kd = 10; 
C = pid(Kp, Ki, Kd);

% ğŸ”„ Closed-loop System
sys_cl = feedback(C*sys, 1);

% ğŸ“ˆ Closed-loop Response
figure; step(sys_cl);
title('Closed-loop Step Response with PID');
```

---

## 6. ğŸ’» Simulation & Implementation

* **Open-loop** â†’ sluggish, high error.
* **Closed-loop with PID** â†’ faster, accurate, stable.

ğŸ“Œ Effects of PID terms:

* $K_p$: reduces rise time.
* $K_i$: removes steady-state error.
* $K_d$: reduces overshoot.

---

## 7. ğŸš€ Deployment Steps

### ğŸ”— Hardware-in-the-Loop (HIL)

* Run controller in MATLAB, connect to real motor hardware.

### ğŸ–¥ï¸ Embedded Deployment

* Generate **C code** (Simulink Coder).
* Deploy to Arduino, STM32, or DSP board.

### âš ï¸ Practical Considerations

* Current limiters protect winding.
* Filters reduce sensor noise.
* Ensure real-time execution.

---

## 8. ğŸ Conclusion

* Modeled motor (transfer function + state-space).
* Analyzed dynamics and stability.
* Designed a PID controller.
* Simulated in MATLAB.
* Outlined deployment for real-time control.

ğŸ‘‰ This bridges **theory â†’ MATLAB â†’ hardware implementation**.

---
