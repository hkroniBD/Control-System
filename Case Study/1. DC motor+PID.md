# 📘 Lecture: DC Motor – From Modeling to Controller Design and Deployment

---

## 1. 🔎 Introduction

* DC motors are widely used in **robotics, industrial drives, and automation** because they are:
  ✅ Easy to control
  ✅ Provide fast and accurate response

* Controller design process involves:

  1. **System Modeling** (mathematical equations)
  2. **System Analysis** (stability, dynamics)
  3. **Controller Design** (PID / state feedback / modern)
  4. **Simulation & Validation** (MATLAB testing)
  5. **Deployment** (embedded implementation on real hardware)

---

## 2. 🧩 System Components and Control Loop

Before we write equations, let’s understand **who does what** in the closed-loop DC motor control system.

### 🎯 Control Goal

* Make the **motor speed (angular velocity, ω)** follow a **reference command** (e.g., a desired RPM).
* Ensure the speed is achieved with **fast response, minimum overshoot, and small steady-state error**.

---

### ⚡ System Roles

1. **Reference (Setpoint, ω\_ref):**

   * The target motor speed (e.g., 100 rad/s).

2. **Controller (Brain):**

   * Compares the error = (ω\_ref – measured ω).
   * Decides the necessary **armature voltage Va** to reduce error.
   * Example: PID controller.

3. **Actuator (Muscle):**

   * Power electronics (e.g., H-bridge, PWM inverter) that apply the control voltage $V_a$ to the motor.

4. **Plant (Body – DC Motor):**

   * Converts the applied voltage into torque and rotational motion.
   * Dynamics governed by electrical + mechanical equations.

5. **Sensor (Eye):**

   * Measures actual speed (ω) using a **tachometer or encoder**.
   * Provides feedback to the controller.

---

### 🔄 Control Loop Block Diagram

```
   Reference Speed (ωref)
              ↓
        +-------------+
        | Controller  | → computes Va
        +-------------+
              ↓
        +-------------+
        |  Actuator   | → applies voltage
        +-------------+
              ↓
        +-------------+
        | DC Motor    | → ω (speed)
        +-------------+
              ↓
   Speed Sensor (encoder) → feedback
```

👉 In this loop:

* *Controller = Brain* 🧠
* *Actuator = Muscle* 💪
* *Sensor = Eye* 👁️
* *Motor = Body* ⚙️

---

## 3. ⚙️ System Modeling

### 📝 Governing Equations

**Electrical equation (KVL):**

$$
V_a(t) = L_a \frac{di_a}{dt} + R_a i_a + K_b \omega(t)
$$

**Mechanical equation (Newton’s Law):**

$$
J \frac{d\omega}{dt} + B\omega(t) = K_t i_a(t)
$$

---

### 📑 Parameters and Their Meaning

* **$V_a$** → Armature voltage (input supply to motor)
* **$i_a$** → Armature current (A)
* **$R_a$** → Armature resistance of DC motor (Ω)
* **$L_a$** → Armature inductance of DC motor (H)
* **$K_b$** → Back-EMF constant (V·s/rad)
* **$\omega$** → Angular velocity (rad/s)
* **$J$** → Rotor inertia of DC motor (kg·m²)
* **$B$** → Viscous friction coefficient of motor (N·m·s)
* **$T_m = K_t i_a$** → Electromagnetic torque (N·m)
* **$K_t$** → Torque constant (N·m/A)

👉 **Interaction:** Apply voltage → current flows → torque generated → rotor accelerates → back EMF opposes input.

---

### 🔄 Transfer Function

$$
\frac{\Omega(s)}{V_a(s)} = \frac{K_t}{(L_a s + R_a)(J s + B) + K_b K_t}
$$

---

### 📊 State-Space Representation

Let $x_1 = i_a, x_2 = \omega$:

$$
\dot{x} =
\begin{bmatrix}
-\frac{R_a}{L_a} & -\frac{K_b}{L_a} \\
\frac{K_t}{J} & -\frac{B}{J}
\end{bmatrix} x +
\begin{bmatrix}
\frac{1}{L_a} \\ 0
\end{bmatrix} V_a
$$

$$
y = [0 \;\; 1] x
$$

---

## 4. 📐 System Analysis

* Motor acts as a **second-order system**.
* Stable if poles of denominator lie in the **left-half plane**.

📌 Example Parameters:

* $R_a = 1 \,Ω, L_a = 0.5 \,H$
* $K_t = K_b = 0.01$
* $J = 0.01 \,kg·m², B = 0.1$

---

## 5. 🎛️ Controller Design

### 🎯 Control Goals

* Motor speed follows reference input.
* Desired performance: **fast rise time, minimal overshoot, zero steady-state error**.

### 🛠️ Methods

* **PID Control** → most common in industry.
* **State Feedback** → pole placement.
* **LQR** → optimal performance.

---

### 🧑‍💻 MATLAB Example: PID Controller

```matlab
% ⚙️ Motor Parameters
Ra = 1; La = 0.5; Kt = 0.01; Kb = 0.01; 
J = 0.01; B = 0.1;

% 📝 Transfer Function
num = [Kt];
den = [(La*J) (Ra*J + La*B) (Ra*B + Kt*Kb)];
sys = tf(num, den);

% 📊 Open-loop Response
figure; step(sys);
title('Open-loop Step Response');

% 🎛️ PID Controller
Kp = 100; Ki = 200; Kd = 10; 
C = pid(Kp, Ki, Kd);

% 🔄 Closed-loop System
sys_cl = feedback(C*sys, 1);

% 📈 Closed-loop Response
figure; step(sys_cl);
title('Closed-loop Step Response with PID');
```

---

## 6. 💻 Simulation & Implementation

* **Open-loop** → sluggish, high error.
* **Closed-loop with PID** → faster, accurate, stable.

📌 Effects of PID terms:

* $K_p$: reduces rise time.
* $K_i$: removes steady-state error.
* $K_d$: reduces overshoot.

---

## 7. 🚀 Deployment Steps

### 🔗 Hardware-in-the-Loop (HIL)

* Run controller in MATLAB, connect to real motor hardware.

### 🖥️ Embedded Deployment

* Generate **C code** (Simulink Coder).
* Deploy to Arduino, STM32, or DSP board.

### ⚠️ Practical Considerations

* Current limiters protect winding.
* Filters reduce sensor noise.
* Ensure real-time execution.

---

## 8. 🏁 Conclusion

* Modeled motor (transfer function + state-space).
* Analyzed dynamics and stability.
* Designed a PID controller.
* Simulated in MATLAB.
* Outlined deployment for real-time control.

👉 This bridges **theory → MATLAB → hardware implementation**.

---
