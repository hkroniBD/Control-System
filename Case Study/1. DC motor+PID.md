# 📘 Lecture: DC Motor – From Modeling to Controller Design and Deployment

---

## 1. 🔎 Introduction

* DC motors are widely used in **robotics, industrial drives, and automation** because they are:
  ✅ Easy to control
  ✅ Provide fast and accurate response
* Controller design process involves:

  1. **System Modeling** (mathematical equations)
  2. **System Analysis** (stability, dynamics)
  3. **Controller Design** (PID / state feedback / modern)
  4. **Simulation & Validation** (MATLAB testing)
  5. **Deployment** (embedded implementation on real hardware)

---

## 2. ⚙️ System Modeling

### 📝 Governing Equations

**Electrical equation (KVL):**

$$
V_a(t) = L_a \frac{di_a}{dt} + R_a i_a + K_b \omega(t)
$$

**Mechanical equation (Newton’s Law):**

$$
J \frac{d\omega}{dt} + B\omega(t) = K_t i_a(t)
$$

---

### 📑 Parameters and Their Meaning

* **$V_a$** → Armature voltage (input supply to motor)
* **$i_a$** → Armature current (amps)
* **$R_a$** → Armature resistance of DC motor (Ω)
* **$L_a$** → Armature inductance of DC motor (H)
* **$K_b$** → Back-EMF constant (V·s/rad)
* **$\omega$** → Angular velocity (rad/s)
* **$J$** → Rotor inertia of DC motor (kg·m²)
* **$B$** → Viscous friction coefficient of motor (N·m·s)
* **$T_m = K_t i_a$** → Electromagnetic torque (N·m)
* **$K_t$** → Torque constant (N·m/A)

👉 **Interaction:** Apply voltage → current flows → torque generated → rotor accelerates → back EMF opposes input.

---

### 🔄 Transfer Function

Laplace transform of equations:

$$
\frac{\Omega(s)}{V_a(s)} = \frac{K_t}{(L_a s + R_a)(J s + B) + K_b K_t}
$$

---

### 📊 State-Space Representation

Let $x_1 = i_a$, $x_2 = \omega$:

$$
\dot{x} =
\begin{bmatrix}
-\frac{R_a}{L_a} & -\frac{K_b}{L_a} \\
\frac{K_t}{J} & -\frac{B}{J}
\end{bmatrix}
x +
\begin{bmatrix}
\frac{1}{L_a} \\ 0
\end{bmatrix} V_a
$$

$$
y = [0 \;\; 1] x
$$

---

## 3. 📐 System Analysis

* DC motor behaves like a **second-order system**.
* Poles are found from denominator of transfer function.
* **Stable system** → poles lie in left-half of complex plane.

📌 **Example Parameters:**

* $R_a = 1 \,Ω, L_a = 0.5 \,H$
* $K_t = K_b = 0.01$
* $J = 0.01 \,kg·m², B = 0.1$

---

## 4. 🎛️ Controller Design

### 🎯 Control Goals

* Motor speed should follow **reference input** (e.g., step signal).
* Desired performance: **fast rise time, minimal overshoot, zero steady-state error**.

### 🛠️ Methods

* **PID Control** → most common in industry.
* **State Feedback** → pole placement method.
* **LQR** → minimizes performance cost function.

---

### 🧑‍💻 MATLAB Example: PID Controller

```matlab
% ⚙️ Motor Parameters
Ra = 1; La = 0.5; Kt = 0.01; Kb = 0.01; 
J = 0.01; B = 0.1;

% 📝 Transfer Function of DC Motor
num = [Kt];
den = [(La*J) (Ra*J + La*B) (Ra*B + Kt*Kb)];
sys = tf(num, den);

% 📊 Step Response (Open Loop)
figure; step(sys);
title('Open-loop Step Response');

% 🎛️ PID Controller
Kp = 100; Ki = 200; Kd = 10; 
C = pid(Kp, Ki, Kd);

% 🔄 Closed-loop System
sys_cl = feedback(C*sys, 1);

% 📈 Step Response (With PID)
figure; step(sys_cl);
title('Closed-loop Step Response with PID');
```

---

## 5. 💻 Simulation & Implementation

* **Open-loop Response**: slow and inaccurate.
* **With PID**: faster, less error, better stability.
* MATLAB `pidTuner` can auto-tune controller gains.

📌 **Effects of PID terms:**

* $K_p$: improves speed, reduces rise time.
* $K_i$: removes steady-state error.
* $K_d$: reduces overshoot, improves stability.

---

## 6. 🚀 Deployment Steps

### 🔗 Hardware-in-the-Loop (HIL)

* Connect real motor hardware while running control algorithm in MATLAB/Simulink.
* Tests design under practical conditions.

### 🖥️ Embedded Deployment

* Generate **C code** with Simulink Coder.
* Deploy to Arduino, STM32, or DSP boards.
* Sampling frequency should be ≥10× motor bandwidth.

### ⚠️ Practical Considerations

* Use **current limiters** → protect winding.
* Add **filters** → remove noise from sensors.
* Ensure **real-time execution** → reliable control.

---

## 7. 🏁 Conclusion

* Modeled DC motor using **differential equations, transfer function, and state-space**.
* Analyzed **dynamics and stability**.
* Designed and simulated a **PID controller in MATLAB**.
* Outlined **deployment workflow** for real-time implementation.

👉 This bridges **theory → MATLAB simulation → real-world control**.
