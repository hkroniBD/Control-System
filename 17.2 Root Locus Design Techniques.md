# 🎯 Root Locus Design Techniques

## 📋 Table of Contents
1. Introduction to Root Locus
2. Fundamental Concepts
3. Root Locus Construction Rules
4. Design Using Root Locus
5. Lead/Lag Compensation via Root Locus
6. Advanced Design Techniques
7. Practical Examples

---

## 🌟 Introduction to Root Locus

### What is Root Locus?

**Root Locus** is a graphical method that shows how the **closed-loop poles** of a system move in the complex plane as a **single parameter** (usually gain K) varies from 0 to ∞.

Think of it like a **"roadmap of stability"** - it tells you where your system poles will travel as you turn up the gain knob!

### 🎭 The Big Picture

```
         +------+       +------+
r(s) --->| K·Gc |------>| G(s) |-----> y(s)
         +------+       +------+
              |                |
              +--------(-)<----+
                    feedback
```

**Closed-Loop Transfer Function:**
```
T(s) = K·Gc(s)·G(s) / [1 + K·Gc(s)·G(s)·H(s)]
```

**Characteristic Equation:**
```
1 + K·Gc(s)·G(s)·H(s) = 0
or
1 + K·G_OL(s) = 0     where G_OL = open-loop transfer function
```

### 🎯 Why Root Locus?

**Advantages:**
- 🔍 **Visual Understanding** - See stability regions instantly
- ⚡ **Quick Design** - Find suitable gain K graphically
- 🎨 **Intuitive** - Physical meaning of pole locations
- 🔧 **Design Insight** - Shows where to add compensators
- 📊 **Performance Prediction** - Overshoot, settling time visible

**What It Tells Us:**
- ✅ Range of K for stability
- ✅ Dominant pole locations
- ✅ System damping and natural frequency
- ✅ Transient response characteristics
- ✅ Where compensation is needed

---

## 🧮 Fundamental Concepts

### 📍 Pole Locations and System Behavior

The location of poles in the s-plane determines system behavior:

```
        jω (imaginary axis)
         ↑
    ②   |   ①        ① Unstable (right half-plane)
   -----+-----→ σ    ② Stable (left half-plane)
    ④   |   ③        ③ Overdamped (real axis, left)
         |            ④ Underdamped (complex, left)
                      ⑤ Marginally stable (jω axis)
```

### 🎪 Key Relationships

**For a pole at s = -σ ± jω:**

**1. Natural Frequency:**
```
ωn = √(σ² + ω²)
```

**2. Damping Ratio:**
```
ζ = σ/ωn = cos(θ)
where θ = angle from negative real axis
```

**3. Damped Frequency:**
```
ωd = ω = ωn√(1 - ζ²)
```

**4. Performance Metrics:**
```
Settling time:    ts ≈ 4/σ     (2% criterion)
Peak time:        tp = π/ωd
Percent overshoot: %OS = 100·e^(-πζ/√(1-ζ²))
```

### 🎨 Constant Damping Lines

Lines of constant ζ are **radial lines** from origin:
```
ζ = 0.0  → 90° (imaginary axis)
ζ = 0.3  → 73°
ζ = 0.5  → 60°
ζ = 0.707 → 45°
ζ = 1.0  → 0° (real axis)
```

### 🧮 Numerical Example 1: Pole Location Analysis

**Given:** A system has closed-loop poles at s = -2 ± j3

**Calculate system characteristics:**

**Step 1: Natural Frequency**
```
ωn = √(σ² + ω²) = √(2² + 3²) = √13 = 3.606 rad/s
```

**Step 2: Damping Ratio**
```
ζ = σ/ωn = 2/3.606 = 0.555
```

**Step 3: Damped Frequency**
```
ωd = ω = 3 rad/s
```

**Step 4: Performance Metrics**
```
Settling time:  ts = 4/σ = 4/2 = 2 seconds
Peak time:      tp = π/ωd = π/3 = 1.047 seconds
Overshoot:      %OS = 100·e^(-π·0.555/√(1-0.555²)) = 12.8%
```

**Physical Interpretation:**
- ✅ System is **stable** (left half-plane)
- ✅ **Underdamped** (complex poles)
- ✅ Settles in **2 seconds**
- ✅ Small overshoot (**12.8%**) - good response!

---

## 📐 Root Locus Construction Rules

### 🎯 The 11 Rules of Root Locus

Given open-loop transfer function:
```
G_OL(s) = K·N(s)/D(s) = K·(s-z₁)(s-z₂)···/(s-p₁)(s-p₂)···
```

Where:
- **n** = number of poles
- **m** = number of zeros (m < n typically)

---

### **Rule 1: Number of Branches** 📊
The root locus has **n branches**, one for each pole.

**Example:**
```
G(s) = K/(s(s+2)(s+5))
→ 3 poles → 3 branches
```

---

### **Rule 2: Symmetry** 🔄
Root locus is **symmetric about the real axis** (complex poles occur in conjugate pairs).

---

### **Rule 3: Real Axis Segments** ➡️
Root locus exists on the real axis to the **left of an odd number** of real poles and zeros.

**Example:**
```
Poles at: 0, -2, -5
Zeros at: -3

Real axis segments:
✅ Between 0 and -2  (1 pole to right)
❌ Between -2 and -3 (2 poles to right)
✅ Between -3 and -5 (3 poles + 1 zero = 2 to right)
❌ Left of -5        (4 singularities to right)
```

---

### **Rule 4: Starting and Ending Points** 🎬🎭

- **Branches start (K=0)** at open-loop **poles**
- **Branches end (K→∞)** at open-loop **zeros** or infinity

---

### **Rule 5: Asymptotes** 📐

For n > m, **(n-m) branches** go to infinity along asymptotes.

**Angles of asymptotes:**
```
θₐ = (2k+1)·180°/(n-m)    k = 0, 1, 2, ..., (n-m-1)
```

**Asymptote centroid (intersection point):**
```
σₐ = (Σ real parts of poles - Σ real parts of zeros)/(n-m)
```

---

### **Rule 6: Breakaway/Break-in Points** 💥

Points where branches **leave or enter** the real axis.

**Found by solving:**
```
dK/ds = 0
or equivalently:
Σ[1/(s-pᵢ)] = Σ[1/(s-zⱼ)]
```

---

### **Rule 7: Departure/Arrival Angles** 🛫🛬

**Departure angle from complex pole pₖ:**
```
θd = 180° + Σ(angles from zeros) - Σ(angles from other poles)
```

**Arrival angle at complex zero zₖ:**
```
θa = 180° - Σ(angles from zeros) + Σ(angles from poles)
```

---

### **Rule 8: Imaginary Axis Crossings** ⚠️

Find where root locus crosses jω axis (stability boundary).

**Method:** Routh-Hurwitz criterion or substitute s = jω into characteristic equation.

---

### **Rule 9: Root Locus on Real Axis** 📍
Between two adjacent poles on real axis, branches move toward each other and either:
- Break away into complex plane, or
- Meet and continue on real axis

---

### **Rule 10: Angle Condition** ∠
A point s is on the root locus if:
```
∠G_OL(s) = (2k+1)·180°    k = 0, ±1, ±2, ...
```

---

### **Rule 11: Magnitude Condition** 📏
The gain K at any point s on root locus:
```
K = 1/|G_OL(s)|
```

---

## 🧮 Numerical Example 2: Complete Root Locus Construction

**Given System:**
```
G(s) = K/[s(s+2)(s+4)]
```

**Step 1: Identify poles and zeros**
```
Poles: p₁ = 0, p₂ = -2, p₃ = -4
Zeros: none (m = 0)
n = 3, m = 0
```

**Step 2: Real axis segments (Rule 3)**
```
✅ Between 0 and -2    (1 pole to right - ODD)
❌ Between -2 and -4   (2 poles to right - EVEN)
✅ Left of -4          (3 poles to right - ODD)
```

**Step 3: Asymptotes (Rule 5)**
```
Number of asymptotes: n - m = 3 - 0 = 3

Angles: θₐ = (2k+1)·180°/3
  k=0: θ₀ = 60°
  k=1: θ₁ = 180°
  k=2: θ₂ = 300° (or -60°)

Centroid: σₐ = (0 + (-2) + (-4) - 0)/(3-0) = -6/3 = -2
```

**Step 4: Breakaway points (Rule 6)**

From characteristic equation:
```
1 + K/[s(s+2)(s+4)] = 0
K = -s(s+2)(s+4) = -s³ - 6s² - 8s

dK/ds = -3s² - 12s - 8 = 0
s² + 4s + 8/3 = 0

s = [-4 ± √(16 - 32/3)]/2 = [-4 ± √(16/3)]/2
s = -0.845  or  s = -3.155
```

**Check validity:**
- s = -0.845 ✅ (between 0 and -2, on root locus)
- s = -3.155 ✅ (between -2 and -4... wait, not on RL!)

**Correct:** Only s = **-0.845** is valid breakaway point.

**Step 5: Imaginary axis crossing (Rule 8)**

Characteristic equation:
```
s³ + 6s² + 8s + K = 0
```

Routh array:
```
s³ |  1      8
s² |  6      K
s¹ | (48-K)/6  0
s⁰ |  K
```

For stability: K < 48

**At K = 48**, system crosses jω axis:
```
6s² + 48 = 0
s² = -8
s = ±j2.828
```

**Crossing frequency:** ω = **2.828 rad/s**

**Step 6: Summary**
```
✅ 3 branches starting at poles (0, -2, -4)
✅ All branches go to infinity
✅ Asymptotes at 60°, 180°, -60° from point (-2, 0)
✅ Breakaway at s = -0.845
✅ Crosses jω axis at ±j2.828 when K = 48
✅ Stable for 0 < K < 48
```

---

## 🎨 Design Using Root Locus

### 🎯 Design Procedure

**Step 1: Sketch Root Locus**
- Apply construction rules
- Identify key features

**Step 2: Specify Performance Requirements**
- Damping ratio ζ
- Natural frequency ωn
- Settling time ts
- Percent overshoot %OS

**Step 3: Determine Desired Pole Location**
```
From ζ and ωn:
s_desired = -ζωn ± jωn√(1-ζ²)
```

**Step 4: Check if Desired Pole is on Root Locus**
- Use angle condition
- If not on RL, need compensation

**Step 5: Find Gain K**
- Use magnitude condition at desired pole location

**Step 6: Verify Performance**
- Calculate actual ζ, ωn, ts, %OS
- Simulate if necessary

---

### 🧮 Numerical Example 3: Gain Selection Design

**Given:**
```
G(s) = K/[(s+1)(s+3)]
```

**Requirements:**
- Damping ratio: ζ ≥ 0.5
- Settling time: ts ≤ 4 seconds

**Step 1: Translate Requirements to s-plane**

For ts = 4 seconds:
```
ts = 4/σ
σ = 4/4 = 1
```

For ζ = 0.5:
```
Angle from negative real axis: θ = cos⁻¹(0.5) = 60°
```

**Desired region:** Left of line σ = -1, within 60° cone.

**Step 2: Construct Root Locus**

Poles: -1, -3
```
Asymptotes: (2k+1)·180°/2
  θ = 90°, 270° (vertical)
Centroid: σₐ = (-1-3)/2 = -2

Breakaway point:
K = -(s+1)(s+3) = -(s² + 4s + 3)
dK/ds = -(2s + 4) = 0
s = -2 ✅ (on real axis between -1 and -3)
```

**Step 3: Find Point on Root Locus**

Try s = -1 + j√3 (on 60° line from σ = -1):
```
Check angle condition:
∠G(s) = ∠[1/((s+1)(s+3))]
      = -[∠(s+1) + ∠(s+3)]
      = -[∠(jΔ3) + ∠(-2+j√3)]
      = -[90° + 140.9°]
      = -230.9° ≠ 180° ✗
```

**Adjust:** Try s = -2 + j2:
```
∠(-1+j2) = 116.6°
∠(1+j2) = 63.4°
∠G(s) = -(116.6° + 63.4°) = -180° ✅

On root locus!
```

**Step 4: Calculate Required Gain**
```
K = |(s+1)(s+3)| at s = -2+j2
  = |(-1+j2)(1+j2)|
  = |(-1+j2)| · |(1+j2)|
  = √5 · √5
  = 5
```

**Step 5: Verify Performance**
```
At s = -2 + j2:
σ = 2, ω = 2
ωn = √(4+4) = 2.828
ζ = 2/2.828 = 0.707 ✅ (> 0.5)
ts = 4/2 = 2 sec ✅ (< 4 sec)
%OS = 4.3% (excellent!)
```

**Final Design: K = 5**

---

## 🎯 Lead Compensation Using Root Locus

### 🎪 Why Lead Compensation?

**Problem:** Desired pole location is **NOT on the original root locus**.

**Solution:** Add a **lead compensator** to reshape the root locus to pass through desired location.

### 📐 Lead Compensator Structure

```
Gc(s) = Kc · (s + zc)/(s + pc)    where pc > zc
```

**Effect:** Adds phase lead (positive phase) to pull root locus to the left.

### 🔧 Design Procedure

**Step 1:** Determine desired closed-loop pole location (s_d) from specs.

**Step 2:** Calculate **phase deficiency** θ_d at s_d:
```
θ_d = 180° - ∠G(s_d)
```

**Step 3:** Choose lead compensator zero (zc) and pole (pc) to provide θ_d.

**Geometric method:**
- Place zc and pc symmetrically about s_d
- Angle contribution = θ_d

**Step 4:** Calculate compensator gain Kc to satisfy magnitude condition.

**Step 5:** Verify new root locus passes through s_d.

---

### 🧮 Numerical Example 4: Lead Compensator Design

**Given:**
```
G(s) = 4/[s(s+2)]
```

**Requirements:**
- ζ = 0.5
- ωn = 4 rad/s

**Step 1: Desired Pole Location**
```
s_d = -ζωn ± jωn√(1-ζ²)
    = -2 ± j3.464
```

**Step 2: Check if on Original Root Locus**
```
∠G(s_d) at s = -2+j3.464:
∠s = 120° (from origin)
∠(s+2) = 90° (from -2)

∠G(s_d) = -(120° + 90°) = -210°

Phase condition: need -180°
Phase deficiency: θ_d = 180° - 210° = -30°

Actually: θ_d = 30° of phase LEAD needed ✅
```

**Step 3: Design Lead Compensator**

Using trial-and-error or geometric method, choose:
```
zc = 3 (zero at -3)
pc = 6 (pole at -6)
```

**Verify angle contribution:**
```
At s_d = -2 + j3.464:
∠(s+3) = ∠(1+j3.464) = 73.9°
∠(s+6) = ∠(4+j3.464) = 40.9°

Angle from compensator: 73.9° - 40.9° = 33° ✅ (close to 30°)
```

**Step 4: Calculate Gain**

Total gain K needed at s_d:
```
K·Gc(s) = K·(s+3)/(s+6)
|K·Gc(s_d)·G(s_d)| = 1

K = |s(s+2)(s+6)|/[4|s+3|]
  at s = -2+j3.464

K = |((-2+j3.464)(j3.464)(4+j3.464))|/[4|(1+j3.464)|]
  = 11.5
```

**Final Lead Compensator:**
```
Gc(s) = 11.5 · (s+3)/(s+6)
```

**Step 5: Verify Performance**

With compensator, closed-loop poles at s = -2 ± j3.464:
```
✅ ζ = 0.5 (as required)
✅ ωn = 4 rad/s (as required)
✅ ts = 4/2 = 2 seconds
✅ %OS = 16.3%
```

---

## 🐌 Lag Compensation Using Root Locus

### 🎯 Why Lag Compensation?

**Problem:** Need to **increase low-frequency gain** without significantly affecting transient response.

**Solution:** Add a **lag compensator** with pole and zero **very close together** and near the origin.

### 📐 Lag Compensator Structure

```
Gc(s) = Kc · (s + zc)/(s + pc)    where zc > pc
```

**Key Feature:** zc and pc very close to origin (typically < 0.1)

### 🔧 Design Procedure

**Step 1:** Design for desired transient response (usually just proportional gain).

**Step 2:** Calculate steady-state error with K from Step 1.

**Step 3:** Determine required DC gain increase (β):
```
β = (desired Kv) / (actual Kv)
```

**Step 4:** Choose lag compensator:
```
zc = 0.1 (typical value)
pc = zc/β
Kc = 1
```

**Step 5:** Verify lag compensator doesn't significantly affect transient response.

---

### 🧮 Numerical Example 5: Lag Compensator Design

**Given:**
```
G(s) = K/[s(s+1)(s+4)]
```

**Requirements:**
- ζ = 0.5 for dominant poles
- Steady-state error for ramp ≤ 0.1

**Step 1: Design for Transient Response**

Desired poles: s = -1 ± j1.732 (ζ=0.5, ωn=2)

From root locus, at these poles:
```
K = 7.5 (calculated using magnitude condition)
```

**Step 2: Calculate Steady-State Error**
```
Kv = lim[s→0] s·G(s) = K/4 = 7.5/4 = 1.875

For ramp input:
ess = 1/Kv = 1/1.875 = 0.533 ✗ (too large!)
```

**Step 3: Required Gain Increase**
```
Desired Kv = 1/0.1 = 10
β = 10/1.875 = 5.33
```

**Step 4: Design Lag Compensator**
```
Choose zc = 0.1
pc = zc/β = 0.1/5.33 = 0.0188

Gc(s) = (s + 0.1)/(s + 0.0188)
```

**Step 5: Verify**

New Kv:
```
Kv = 7.5 × (0.1/0.0188) / 4 = 10 ✅

New ess = 1/10 = 0.1 ✅ (meets requirement)
```

**Check transient response:**
- Dominant poles move only slightly to s ≈ -1.05 ± j1.75
- ζ ≈ 0.51 (essentially unchanged) ✅
- Settling time essentially same ✅

**Final Design:**
```
Controller: Gc(s) = 7.5 · (s+0.1)/(s+0.0188)
Result: ess = 0.1, ζ ≈ 0.5, ts ≈ 4 sec
```

---

## 🎪 Advanced Root Locus Techniques

### 🔄 1. PID Controller Design via Root Locus

**PID Transfer Function:**
```
Gc(s) = Kp + Ki/s + Kd·s = (Kd·s² + Kp·s + Ki)/s
```

This adds:
- One pole at origin (from integrator)
- Two zeros (from numerator)

**Design steps:**
1. Choose zero locations to shape desired response
2. Use root locus to find gains
3. Iterate to optimize performance

### 🧮 Numerical Example 6: PD Controller Design

**Given:**
```
G(s) = 1/(s² + 2s + 2)
```

**Requirement:** ζ = 0.707

**Step 1: Original System Poles**
```
s² + 2s + 2 = 0
s = -1 ± j1
ζ_original = 1/√2 = 0.707 ✅ (already meets spec!)
```

But suppose we want **faster response** with same ζ.

**Step 2: Design PD Controller**
```
Gc(s) = Kp + Kd·s = Kp(1 + Td·s)
      = Kp(s + 1/Td)

Choose Td = 0.5, so zero at s = -2
```

**Step 3: New Root Locus**

System with PD:
```
G_new(s) = Kp(s+2)/(s² + 2s + 2)
```

Find K for ζ = 0.707 on new root locus.

Desired poles: s = -2.83 ± j2.83 (45° line, faster response)

```
Kp = 4 (from magnitude condition)
```

**Step 4: Results**
```
Original: ωn = √2 = 1.41, ts = 4/1 = 4 sec
With PD:  ωn = 4, ts = 4/2.83 = 1.41 sec ✅

Speed improvement: 2.8× faster!
```

---

### 🎯 2. Dominant Pole Design

**Concept:** If poles are well-separated, the **closest poles to jω axis** dominate response.

**Rule of Thumb:** Poles are dominant if they are **5× closer** to jω axis than other poles.

**Example:**
```
Poles at: -1±j2, -10, -12
Dominant: -1±j2 ✅
Far poles: -10, -12 (can approximate as gain)
```

**Design Strategy:**
1. Design for dominant pole specifications
2. Ignore far poles initially
3. Verify assumption afterward

---

### 🔍 3. Root Locus for Other Parameters

Root locus can vary **any parameter**, not just gain!

**Examples:**
- Vary a time constant τ
- Vary damping ratio ζ
- Vary zero/pole location

**Procedure:**
1. Rearrange characteristic equation to isolate parameter
2. Apply root locus rules
3. Interpret results

---

## 🏭 Real-World Applications

### 🚁 Application 1: Drone Attitude Control

**System:** Quadcopter pitch angle control
```
G(s) = 25/[s²(s+5)]
```

**Requirements:**
- Settling time: ts ≤ 2 sec
- Overshoot: %OS ≤ 20%
- Zero steady-state error for step

**Solution Using Root Locus:**

**From specs:**
```
%OS = 20% → ζ = 0.456
ts = 2 sec → σ = 4/2 = 2
ωn = σ/ζ = 2/0.456 = 4.39
ωd = ωn√(1-ζ²) = 3.91

Desired poles: s = -2 ± j3.91
```

**Root locus shows:** Original locus doesn't pass through desired location.

**Add lead compensator:**
```
Gc(s) = K(s+3)/(s+12)
```

After design:
```
K = 86
Final poles: s = -2.1 ± j3.88
Result: ts = 1.9 sec, %OS = 19.5% ✅
```

---

### 🏎️ Application 2: Automotive Cruise Control

**System:** Vehicle speed control
```
G(s) = 10/[(s+1)(s+5)]
```

**Design for:**
- Fast response (ts < 3 sec)
- Minimal overshoot (%OS < 5%)
- Zero steady-state error

**Root Locus Analysis:**

Original system:
```
Dominant poles at s = -0.5 ± j1.5 for K = 2
ζ = 0.316 → %OS = 35% ✗ (too high!)
```

**Add PD controller:**
```
Gc(s) = Kp(1 + s) = Kp(s+1)
```

New root locus passes through better locations:
```
With Kp = 3, poles at s = -2.5 ± j2
ζ = 0.78 → %OS = 2% ✅
ts = 4/2.5 = 1.6 sec ✅
```

---

## 🎓 Design Guidelines and Tips

### ✅ Best Practices

**1. Always Start with Sketching**
- Hand sketch first (builds intuition)
- Use software to verify (MATLAB, Python)

**2. Check Your Work**
- Verify angle condition at selected points
- Calculate gain using magnitude condition
- Simulate final design

**3. Consider Implementation**
- Can you realize the compensator?
- Sensor noise effects?
- Actuator saturation?

**4. Use Dominant Pole Approximation**
- Simplifies design
- Focus on critical poles
- Verify assumption holds

**5. Multiple Iterations**
- First design rarely optimal
- Adjust and refine
- Balance competing requirements

### ⚠️ Common Pitfalls

**❌ Ignoring Far Poles/Zeros**
- May affect high-frequency behavior
- Can impact noise sensitivity

**❌ Placing Compensator Poles/Zeros Poorly**
- Too close to desired poles → affects location
- Too far → minimal effect

**❌ Forgetting Stability Margins**
- Root locus shows pole locations
- Still check gain/phase margins in frequency domain

**❌ Over-Complicating Design**
- Start simple (P or PD)
- Add complexity only if needed

---

## 📊 Comparison: Root Locus vs. Frequency Methods

| Aspect | Root Locus | Frequency (Bode/Nyquist) |
|--------|-----------|--------------------------|
| **Domain** | s-plane | Frequency (jω) |
| **Intuition** | Time response | Stability margins |
| **Best for** | Transient specs | Robustness specs |
| **Parameter** | Single (usually K) | Frequency sweep |
| **Design** | Graphical, intuitive | Analytical, precise |
| **Advantage** | Visual pole placement | Noise, disturbance analysis |

**Best Practice:** Use **both methods** for complete design!

---

## 🧮 Summary Table: Design Methods

| Method | When to Use | Advantage | Limitation |
|--------|------------|-----------|------------|
| **Gain Adjustment** | RL passes through desired point | Simple, direct | Limited control |
| **Lead Comp** | Need faster response | Improves speed & stability |
