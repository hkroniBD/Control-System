# ğŸ“˜ Lecture: DC Motor â€“ From Modeling to Controller Design and Deployment

---

## 1. ğŸ” Introduction

* DC motors are widely used in **robotics, industrial drives, and automation** because they are:
  âœ… Easy to control
  âœ… Provide fast and accurate response
* Controller design process involves:

  1. **System Modeling** (mathematical equations)
  2. **System Analysis** (stability, dynamics)
  3. **Controller Design** (PID / state feedback / modern)
  4. **Simulation & Validation** (MATLAB testing)
  5. **Deployment** (embedded implementation on real hardware)

---

## 2. âš™ï¸ System Modeling

### ğŸ“ Governing Equations

**Electrical equation (KVL):**

$$
V_a(t) = L_a \frac{di_a}{dt} + R_a i_a + K_b \omega(t)
$$

**Mechanical equation (Newtonâ€™s Law):**

$$
J \frac{d\omega}{dt} + B\omega(t) = K_t i_a(t)
$$

---

### ğŸ“‘ Parameters and Their Meaning

* **$V_a$** â†’ Armature voltage (input supply to motor)
* **$i_a$** â†’ Armature current (amps)
* **$R_a$** â†’ Armature resistance of DC motor (Î©)
* **$L_a$** â†’ Armature inductance of DC motor (H)
* **$K_b$** â†’ Back-EMF constant (VÂ·s/rad)
* **$\omega$** â†’ Angular velocity (rad/s)
* **$J$** â†’ Rotor inertia of DC motor (kgÂ·mÂ²)
* **$B$** â†’ Viscous friction coefficient of motor (NÂ·mÂ·s)
* **$T_m = K_t i_a$** â†’ Electromagnetic torque (NÂ·m)
* **$K_t$** â†’ Torque constant (NÂ·m/A)

ğŸ‘‰ **Interaction:** Apply voltage â†’ current flows â†’ torque generated â†’ rotor accelerates â†’ back EMF opposes input.

---

### ğŸ”„ Transfer Function

Laplace transform of equations:

$$
\frac{\Omega(s)}{V_a(s)} = \frac{K_t}{(L_a s + R_a)(J s + B) + K_b K_t}
$$

---

### ğŸ“Š State-Space Representation

Let $x_1 = i_a$, $x_2 = \omega$:

$$
\dot{x} =
\begin{bmatrix}
-\frac{R_a}{L_a} & -\frac{K_b}{L_a} \\
\frac{K_t}{J} & -\frac{B}{J}
\end{bmatrix}
x +
\begin{bmatrix}
\frac{1}{L_a} \\ 0
\end{bmatrix} V_a
$$

$$
y = [0 \;\; 1] x
$$

---

## 3. ğŸ“ System Analysis

* DC motor behaves like a **second-order system**.
* Poles are found from denominator of transfer function.
* **Stable system** â†’ poles lie in left-half of complex plane.

ğŸ“Œ **Example Parameters:**

* $R_a = 1 \,Î©, L_a = 0.5 \,H$
* $K_t = K_b = 0.01$
* $J = 0.01 \,kgÂ·mÂ², B = 0.1$

---

## 4. ğŸ›ï¸ Controller Design

### ğŸ¯ Control Goals

* Motor speed should follow **reference input** (e.g., step signal).
* Desired performance: **fast rise time, minimal overshoot, zero steady-state error**.

### ğŸ› ï¸ Methods

* **PID Control** â†’ most common in industry.
* **State Feedback** â†’ pole placement method.
* **LQR** â†’ minimizes performance cost function.

---

### ğŸ§‘â€ğŸ’» MATLAB Example: PID Controller

```matlab
% âš™ï¸ Motor Parameters
Ra = 1; La = 0.5; Kt = 0.01; Kb = 0.01; 
J = 0.01; B = 0.1;

% ğŸ“ Transfer Function of DC Motor
num = [Kt];
den = [(La*J) (Ra*J + La*B) (Ra*B + Kt*Kb)];
sys = tf(num, den);

% ğŸ“Š Step Response (Open Loop)
figure; step(sys);
title('Open-loop Step Response');

% ğŸ›ï¸ PID Controller
Kp = 100; Ki = 200; Kd = 10; 
C = pid(Kp, Ki, Kd);

% ğŸ”„ Closed-loop System
sys_cl = feedback(C*sys, 1);

% ğŸ“ˆ Step Response (With PID)
figure; step(sys_cl);
title('Closed-loop Step Response with PID');
```

---

## 5. ğŸ’» Simulation & Implementation

* **Open-loop Response**: slow and inaccurate.
* **With PID**: faster, less error, better stability.
* MATLAB `pidTuner` can auto-tune controller gains.

ğŸ“Œ **Effects of PID terms:**

* $K_p$: improves speed, reduces rise time.
* $K_i$: removes steady-state error.
* $K_d$: reduces overshoot, improves stability.

---

## 6. ğŸš€ Deployment Steps

### ğŸ”— Hardware-in-the-Loop (HIL)

* Connect real motor hardware while running control algorithm in MATLAB/Simulink.
* Tests design under practical conditions.

### ğŸ–¥ï¸ Embedded Deployment

* Generate **C code** with Simulink Coder.
* Deploy to Arduino, STM32, or DSP boards.
* Sampling frequency should be â‰¥10Ã— motor bandwidth.

### âš ï¸ Practical Considerations

* Use **current limiters** â†’ protect winding.
* Add **filters** â†’ remove noise from sensors.
* Ensure **real-time execution** â†’ reliable control.

---

## 7. ğŸ Conclusion

* Modeled DC motor using **differential equations, transfer function, and state-space**.
* Analyzed **dynamics and stability**.
* Designed and simulated a **PID controller in MATLAB**.
* Outlined **deployment workflow** for real-time implementation.

ğŸ‘‰ This bridges **theory â†’ MATLAB simulation â†’ real-world control**.
