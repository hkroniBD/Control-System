# 🎛️ Compensation Techniques in Control Systems
- Author: Md. Hassanul Karim Roni, Assistant Professor, EEE, HSTU
- Subject: Control Systems
- Topic: Designing for Desired Performance
---
## 📋 Table of Contents
1. Introduction to Compensation
2. Types of Compensation
3. Lead Compensation
4. Lag Compensation
5. Lag-Lead Compensation
6. Practical Examples
7. Summary & Comparison

---

## 🎯 1. Introduction to Compensation

### What is Compensation?

**Compensation** is a technique used to modify the system dynamics by introducing additional components (compensators) to achieve desired performance specifications.

In control systems, compensation means modifying a system to improve its performance, stability, and transient or steady-state response without changing the fundamental structure.

The compensator is like a “tuning accessory” that reshapes the behavior of a system — either by adjusting its phase, gain, or dynamics.

### 🎪 Why Do We Need Compensation?

| Reason                                    | Description                         | Real-World Example               |
| :---------------------------------------- | :---------------------------------- | :------------------------------- |
| **To improve steady-state accuracy**      | Reduces steady-state error          | Speed control of DC motor        |
| **To improve transient response**         | Adjusts rise and settling times     | Aircraft autopilot systems       |
| **To increase system stability**          | Adds phase margin and gain margin   | Power converters and inverters   |
| **To achieve desired frequency response** | Balances low & high-frequency gains | Audio amplifiers, control drives |


### 📍 Types of Compensator Placement

| Type | Location |
|------|----------|
| **Series/Cascade** | Between controller and plant |
| **Feedback/Minor Loop** | In feedback path | 
| **Feed-forward** | Parallel to forward path | 


---

## 🔧 2. Types of Compensation

| **Compensator Type** | **Transfer Function**                                                | **Primary Effect**                                             | **Typical Application**             |
| -------------------- | -------------------------------------------------------------------- | -------------------------------------------------------------- | ----------------------------------- |
| **Lead** 🚀          | 𝐺꜀(𝑠) = 𝐾꜀ × (𝑠 + 𝑧) / (𝑠 + 𝑝), 𝑧 < 𝑝                       | Adds phase lead, improves transient speed and stability margin | Fast response systems, motor drives |
| **Lag** 🐌           | 𝐺꜀(𝑠) = 𝐾꜀ × (𝑠 + 𝑧) / (𝑠 + 𝑝), 𝑧 > 𝑝                       | Adds phase lag, improves steady-state accuracy                 | Process and voltage control         |
| **Lag–Lead** ⚖️      | 𝐺꜀(𝑠) = 𝐾꜀ × ((𝑠 + 𝑧₁)(𝑠 + 𝑧₂)) / ((𝑠 + 𝑝₁)(𝑠 + 𝑝₂))      | Balances transient and steady-state performance                | Power and robotic systems           |
| **P** 📏             | 𝐺꜀(𝑠) = 𝐾ₚ                                                        | Increases gain, speeds up response slightly                    | Simple gain adjustment              |
| **I** 🔄             | 𝐺꜀(𝑠) = 𝐾ᵢ / 𝑠                                                   | Eliminates steady-state error                                  | Precision control loops             |
| **D** ⚡              | 𝐺꜀(𝑠) = 𝐾_d 𝑠                                                    | Predictive control, adds damping                               | Reduces overshoot, oscillations     |
| **PI** 🔁            | 𝐺꜀(𝑠) = 𝐾ₚ + 𝐾ᵢ / 𝑠 = 𝐾ₚ(1 + 1 / (𝑇ᵢ 𝑠))                     | Improves accuracy with moderate speed                          | Converter and speed control         |
| **PD** ⚙️            | 𝐺꜀(𝑠) = 𝐾ₚ + 𝐾_d 𝑠 = 𝐾ₚ(1 + 𝑇_d 𝑠)                           | Improves damping and transient behavior                        | Servo and robotic control           |
| **PID** 🧠           | 𝐺꜀(𝑠) = 𝐾ₚ + 𝐾ᵢ / 𝑠 + 𝐾_d 𝑠 = 𝐾ₚ(1 + 1 / (𝑇ᵢ 𝑠) + 𝑇_d 𝑠) | Combines all effects — fast, stable, accurate                  | Universal industrial controller     |


---

## 🚀 3. Lead Compensation
### 🎨 The Idea
A Lead Compensator is like a "phase booster". It adds positive phase shift near the gain crossover frequency, thereby increasing the Phase Margin.

This shifts the root locus to the left → faster response, higher damping.
### 📐 Transfer Function

$$G_c(s) = K_c \cdot \alpha \frac{Ts + 1}{\alpha Ts + 1}$$

where: **α < 1** (typically 0.05 to 0.15)

### 📊 Effect on Performance
| Parameter          | Before Compensation | After Lead Compensation |
| :----------------- | :-----------------: | :---------------------: |
| Rise Time          |         High        |       ↓ Decreases       |
| Settling Time      |       Moderate      |       ↓ Decreases       |
| Overshoot          |         High        |        ↓ Reduces        |
| Steady-State Error |       Moderate      |   ≈ Slightly improved   |

### ✨ Key Characteristics

- **Zero location**: $z = -\frac{1}{T}$
- **Pole location**: $p = -\frac{1}{\alpha T}$
- **Maximum phase lead**: $\phi_m = \sin^{-1}\left(\frac{1-\alpha}{1+\alpha}\right)$
- **Frequency of max phase**: $\omega_m = \frac{1}{T\sqrt{\alpha}}$

### 🌍 Real-World Example: Aircraft Pitch Control

**Problem:** An aircraft's pitch response is too sluggish and has poor phase margin.

**Solution:** Add a lead compensator to:
- Speed up the nose movement response
- Increase stability during maneuvers
- Improve pilot control feel

**Practical Implementation:**
- Electronic flight control systems use lead compensation
- Helps pilots make quick, precise adjustments
- Prevents pilot-induced oscillations (PIO)

### 🏭 Industrial Example: Robot Arm Positioning

A robotic arm needs to position precisely and quickly. Lead compensation:
- Reduces settling time from 2 seconds to 0.5 seconds
- Increases phase margin from 30° to 60°
- Allows faster production cycles
---
### 🎯 Design Steps

1. Determine required phase margin (PM)
2. Calculate α using: $\alpha = \frac{1-\sin\phi_m}{1+\sin\phi_m}$
3. Find frequency where phase = -(180° - PM - $φ_m$)
4. Calculate T using: $T = \frac{1}{\omega_m\sqrt{\alpha}}$
5. Adjust gain K_c for desired crossover

---

## 📊 Example 1: Lead Compensation Design

### Problem Statement

Design a lead compensator for:

$$G(s) = \frac{10}{s(s+2)}$$

**Specifications:**
- Phase margin ≥ 45°
- Gain margin ≥ 10 dB

### 📝 Solution

**Step 1:** Evaluate uncompensated system
- For G(s), find gain crossover frequency (ωgc) where |G(jω)| = 1
- $|G(j\omega)|^2 = \frac{100}{\omega^2(\omega^2+4)} = 1$
- Solving: ω ≈ 3.08 rad/s
- Phase at ωgc: ∠G(j3.08) = -90° - tan⁻¹(3.08/2) ≈ -147°
- **Current PM** = 180° - 147° = 33° ❌ (Insufficient!)

**Step 2:** Determine required phase lead
- Additional phase needed = 45° - 33° + 5° (safety margin) = **17°**

**Step 3:** Calculate α
$$\alpha = \frac{1-\sin(17°)}{1+\sin(17°)} = \frac{1-0.292}{1+0.292} = 0.548$$

**Step 4:** Find new gain crossover frequency
- At ωm, magnitude boost = $\frac{1}{\sqrt{\alpha}} = 1.35$
- New ωgc ≈ 4.2 rad/s

**Step 5:** Calculate T
$$T = \frac{1}{\omega_m\sqrt{\alpha}} = \frac{1}{4.2\times\sqrt{0.548}} = 0.32$$

**Step 6:** Lead compensator
$$G_c(s) = 1.82 \cdot \frac{s + 3.125}{s + 5.7}$$

### 📈 Results

| Parameter | Before | After | Status |
|-----------|--------|-------|--------|
| Phase Margin | 33° | 47° | ✅ Improved |
| Gain Margin | 6 dB | 12 dB | ✅ Improved |
| Settling Time | High | Reduced | ✅ Faster |

---

## 🐌 4. Lag Compensation
### 🎨 The Idea
A Lag Compensator is like a "low-frequency amplifier". It increases the system's gain at very low frequencies to reduce steady-state error, without significantly affecting the transient response at medium/high frequencies.
### 📐 Transfer Function

$$G_c(s) = K_c \cdot \beta \frac{Ts + 1}{\beta Ts + 1}$$

where: **β > 1** (typically 5 to 20)
### 📊 Effect on Performance
| Parameter          | Before |   After Lag Compensation  |
| :----------------- | :----: | :-----------------------: |
| Rise Time          |    —   |    Slightly ↑ Increases   |
| Settling Time      |    —   |        ≈ Unchanged        |
| Overshoot          |    —   |        ≈ Unchanged        |
| Steady-State Error |    —   | ↓ Decreases significantly |

### ✨ Key Characteristics

- **Zero location**: $z = -\frac{1}{T}$ (closer to origin)
- **Pole location**: $p = -\frac{1}{\beta T}$ (even closer to origin)
- Provides attenuation at high frequencies
- Increases low-frequency gain without affecting phase margin much

### 🌍 Real-World Example: Temperature Control System

**Problem:** A furnace maintains temperature within ±5°C but needs ±1°C accuracy.

**Solution:** Add a lag compensator to:
- Increase DC gain (low-frequency gain)
- Reduce steady-state temperature error
- Maintain stable operation

**Before Compensation:**
```
Steady-state error = 4°C
Rise time = 3 minutes
```

**After Lag Compensation:**
```
Steady-state error = 0.5°C
Rise time = 3.5 minutes (slight increase)
```

### 🚗 Automotive Example: Cruise Control

Modern cruise control systems use lag compensation to:
- Minimize speed error on flat roads (improve accuracy)
- Maintain set speed within ±0.5 mph
- Handle gradual changes in road grade

**Real Result:** Your car holds 65 mph instead of varying between 63-67 mph.

---

### 🎯 Design Steps

1. Determine gain K to satisfy steady-state requirement
2. Find phase margin with this gain
3. Choose lag corner frequency (1/T) at 5-10× below gain crossover
4. Calculate β to provide required attenuation
5. Verify specifications are met

---

## 📊 Example 2: Lag Compensation Design

### Problem Statement

Design a lag compensator for:

$$G(s) = \frac{K}{s(s+1)(s+4)}$$

**Specifications:**
- Steady-state error for ramp input ≤ 0.1
- Phase margin ≥ 40°

### 📝 Solution

**Step 1:** Determine K for steady-state requirement
- For ramp: $e_{ss} = \frac{1}{K_v}$ where $K_v = \lim_{s \to 0} sG(s) = \frac{K}{4}$
- For $e_{ss} = 0.1$: $K_v = 10$, so **K = 40**

**Step 2:** Evaluate system with K = 40
$$G(s) = \frac{40}{s(s+1)(s+4)}$$
- At ω ≈ 2.7 rad/s: |G(jω)| = 1 (gain crossover)
- Phase at 2.7 rad/s ≈ -155°
- **Current PM** = 180° - 155° = 25° ❌ (Insufficient!)

**Step 3:** Design lag compensator
- Choose lag corner at: $\frac{1}{T} = \frac{2.7}{10} = 0.27$ rad/s
- Need 15° phase margin improvement
- At ω = 2.7 rad/s, need attenuation to shift crossover
- Choose **β = 10**

**Step 4:** Lag compensator
$$G_c(s) = 10 \cdot \frac{s + 0.27}{s + 0.027}$$

### 📈 Results

| Parameter | Before | After | Status |
|-----------|--------|-------|--------|
| Phase Margin | 25° | 42° | ✅ Improved |
| Steady-state Error | 0.1 | 0.1 | ✅ Maintained |
| K_v | 10 | 10 | ✅ Maintained |

---

## ⚖️ 5. Lag-Lead Compensation
### 🎨 The Idea
This is the "best of both worlds" compensator. The lead part improves stability and speed, while the lag part improves steady-state accuracy.
### 📐 Transfer Function

$$G_c(s) = K_c \cdot \frac{(s+z_1)(s+z_2)}{(s+p_1)(s+p_2)}$$

Combines both lag and lead sections!

### ✨Effect on Performance

| Aspect                | Effect                      |
| :-------------------- | :-------------------------- |
| Transient response    | Improved (Lead effect)      |
| Steady-state accuracy | Improved (Lag effect)       |
| Stability margin      | Increased                   |
| Complexity            | Higher (two time constants) |

---
### 🌍 Real-World Example: Satellite Dish Positioning

**Challenge:** Position a satellite dish accurately (±0.1°) and quickly (< 2 seconds).

**Solution:** Lead-lag compensator provides:

**Lead Section:**
- Fast slewing to target position
- Quick response to tracking commands
- Stable during rapid movements

**Lag Section:**
- Fine positioning accuracy
- Minimal steady-state pointing error
- Compensates for wind disturbances

**Result:** Dish acquires satellite signal in 1.5 seconds with 0.05° accuracy.

### 🏥 Medical Example: MRI Scanner Gradient Coils

MRI machines need precise magnetic field control:

- **Lead compensation:** Fast switching between imaging sequences
- **Lag compensation:** Precise field strength for image quality
- **Combined effect:** Clear images with faster scan times

---


## 📊 Example 3: Lag-Lead Compensation

### Problem Statement

Design a lag-lead compensator for:

$$G(s) = \frac{1}{s(s+1)}$$

**Specifications:**
- K_v = 20 s⁻¹
- Phase margin = 50°
- Gain margin ≥ 10 dB

### 📝 Solution

**Step 1: Lag Section** (for steady-state)
- Required: $K_v = \lim_{s \to 0} sG(s)G_{lag}(s) = 20$
- Choose β = 20, with corner at 0.1 rad/s
$$G_{lag}(s) = 20 \cdot \frac{s + 0.1}{s + 0.005}$$

**Step 2: Lead Section** (for transient)
- After lag, need 50° PM at higher frequency
- Choose α = 0.2 (gives φm ≈ 55°)
- Place ωm at 4 rad/s
- T = 0.55
$$G_{lead}(s) = 5 \cdot \frac{s + 1.82}{s + 9.1}$$

**Step 3: Combined Compensator**
$$G_c(s) = \frac{100(s + 0.1)(s + 1.82)}{(s + 0.005)(s + 9.1)}$$

### 📈 Results

| Parameter | Uncompensated | Lag-Lead | Status |
|-----------|---------------|----------|--------|
| K_v | 1 | 20 | ✅ 20× better |
| Phase Margin | ~30° | 52° | ✅ Improved |
| Gain Margin | ~6 dB | 13 dB | ✅ Improved |
| Settling Time | High | Moderate | ✅ Improved |

---

Excellent, HK Roni Sir 👨‍🏫.
Below is the **updated markdown lecture section**, now integrating the **PID Compensator as Section 6**, followed by your **Comparison Summary (Section 7)**, **Key Takeaways (Section 8)**, and **Practice Problems** — perfectly formatted and lecture-ready.

---

# ⚙️ 6. PID Compensator

---

## 📘 Concept

A **PID compensator** blends **Proportional (P)**, **Integral (I)**, and **Derivative (D)** actions to improve both **transient** and **steady-state** performance simultaneously. It is the most widely used industrial control technique.

**Transfer Function:**

```
Gc(s) = Kp + Ki/s + Kd·s
```

or equivalently,

```
Gc(s) = Kp(1 + 1/(Ti·s) + Td·s)
```

---

## 📊 Role of Each Term

| **Component**        | **Transfer Function** | **Function**                                                              |
| -------------------- | --------------------- | ------------------------------------------------------------------------- |
| **P (Proportional)** | Kp                    | Reduces rise time, improves response speed but steady-state error remains |
| **I (Integral)**     | Ki / s                | Eliminates steady-state error by increasing low-frequency gain            |
| **D (Derivative)**   | Kd·s                  | Predicts error trend, reduces overshoot, and enhances stability           |

---
### 🌡️ Real-World Example: Building HVAC System

**System:** Control temperature in a 10-story office building

**P Control Alone:**
- Quick response to temperature changes
- Error: Room stays at 21°C when setpoint is 22°C
- Problem: 1°C steady-state error

**PI Control:**
- P component: Fast initial response
- I component: Eliminates that 1°C error over time
- Result: Temperature reaches exactly 22°C

**PID Control:**
- P component: Fast response
- I component: Zero steady-state error
- D component: Prevents temperature overshoot to 24°C
- Result: Smooth approach to 22°C with no overshoot

### 🏭 Industrial Example: Chemical Reactor pH Control

**Challenge:** Maintain pH = 7.0 in a reactor with varying inputs

**Without D term (PI control):**
- pH oscillates: 6.8 → 7.3 → 6.9 → 7.2
- Settling time: 10 minutes

**With PID control:**
- pH smoothly reaches 7.0
- Minimal oscillation
- Settling time: 3 minutes

**Real Impact:** Better product quality, less waste, higher yield

---

## 🔢 Numerical Example

Given plant:

```
G(s) = 1 / [s(s + 1)]
```

Design PID for ζ = 0.7 and ωₙ = 3 rad/s

Controller:

```
Gc(s) = Kp + Ki/s + Kd·s
```

Initial tuning:

* Kp = 30
* Ki = 70
* Kd = 5

**Simulated Step Response:**

| **Parameter**      | **Value** | **Interpretation**     |
| ------------------ | --------- | ---------------------- |
| Rise Time          | 0.35 s    | Fast response          |
| Overshoot          | ≈ 5%      | Slight and well-damped |
| Settling Time      | ≈ 1.2 s   | Quick stabilization    |
| Steady-State Error | ≈ 0       | High accuracy          |

---

## ⚡ Physical Significance

The **PID controller** acts like a skilled driver:

* **P** term steers towards the target,
* **I** term corrects drift or bias,
* **D** term anticipates changes for smooth action.

It ensures a perfect balance of **speed, accuracy, and stability**, making it indispensable in **servo control, converters, robotics, and process systems**.

---

# 📊 7. Comparison Summary

---

## 🧩 Performance Comparison Table

| **Aspect**             | **Lead 🚀**                  | **Lag 🐌**            | **Lag–Lead ⚖️**      | **PID 🧠**                            |
| ---------------------- | ---------------------------- | --------------------- | -------------------- | ------------------------------------- |
| **Transient Response** | ⭐⭐⭐                          | ⭐                     | ⭐⭐⭐                  | ⭐⭐⭐⭐                                  |
| **Steady-State Error** | ⭐                            | ⭐⭐⭐                   | ⭐⭐⭐                  | ⭐⭐⭐⭐                                  |
| **Bandwidth**          | Increases                    | Decreases             | Moderate             | Adjustable                            |
| **Noise Sensitivity**  | Higher                       | Lower                 | Moderate             | Higher (due to D)                     |
| **Complexity**         | Simple                       | Simple                | Complex              | Moderate–High                         |
| **Cost**               | Low                          | Low                   | Medium               | Medium                                |
| **Best Used When**     | System needs faster response | System needs accuracy | Balanced requirement | Full precision and stability required |

---

## 🎯 Selection Guidelines

```
┌─────────────────────────────────────┐
│  Need faster response?              │
│  → Use LEAD compensation 🚀         │
├─────────────────────────────────────┤
│  Need better steady-state?          │
│  → Use LAG compensation 🐌          │
├─────────────────────────────────────┤
│  Need both improvements?            │
│  → Use LAG–LEAD compensation ⚖️     │
├─────────────────────────────────────┤
│  Need full control with tuning?     │
│  → Use PID compensator 🧠           │
└─────────────────────────────────────┘
```

---

# 📌 8. Key Takeaways

---

## 💡 Important Formulas

| **Compensator** | **Max Phase**           | **Corner Frequency**   | **Gain**      |
| --------------- | ----------------------- | ---------------------- | ------------- |
| **Lead**        | φₘ = sin⁻¹((1−α)/(1+α)) | ωₘ = 1 / (T√α)         | Kc·α          |
| **Lag**         | Phase lag (−ve)         | ω₁ = 1/T, ω₂ = 1/(βT)  | Kc·β          |
| **PID**         | N/A                     | Ti = Kp/Ki, Td = Kd/Kp | Kp adjustable |

---

## ✅ Design Checklist

* [ ] Identify system performance specs
* [ ] Analyze uncompensated response
* [ ] Choose suitable compensator type
* [ ] Compute compensator parameters
* [ ] Verify stability margins
* [ ] Simulate closed-loop response
* [ ] Fine-tune and validate results

---

## 🎓 Practical Tips

1. Add **5–10° phase safety margin** in design
2. Place **lag corner 5–10× below gain crossover**
3. Typical α values: 0.05–0.2 (lead)
4. Typical β values: 5–20 (lag)
5. Check **parameter sensitivity** post-design
6. For PID, start tuning with **Ziegler–Nichols** or **Cohen–Coon** method

---

# 🔬 9. Practice Problems

### **Problem 1**

Design a **lead compensator** for
G(s) = 4 / [s(s + 2)]
to achieve a phase margin ≥ 50°.

### **Problem 2**

Design a **lag compensator** for
G(s) = K / [s(s + 5)(s + 10)]
such that steady-state error for ramp input ≤ 0.05.

### **Problem 3**

Compare **lead** and **lag–lead** performance for
G(s) = 1 / [s²(s + 3)].

### **Problem 4**

Tune a **PID controller** for
G(s) = 1 / [s(s + 4)]
to achieve <10% overshoot and zero steady-state error.

---

# 📚 References & Further Reading

* **Textbooks:**

  * *Modern Control Engineering* – Ogata
  * *Control Systems Engineering* – Norman Nise

* **Standards:**
  IEEE Guidelines for Control Design

* **Tools:**
  MATLAB/Simulink | Python Control Library

---

*Remember: A good compensator doesn’t just stabilize the system — it makes it behave intelligently under all conditions!* ⚡

---
